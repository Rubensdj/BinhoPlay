<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imp√©rio | √Årea Restrita</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Playfair+Display:ital,wght@1,600&display=swap" rel="stylesheet">

    <style>
        /* --- üé® CONFIGURA√á√ÉO DE CORES (Mude aqui) --- */
        :root {
            --bg-color: #050505;          /* Fundo do site */
            --glass-bg: rgba(255, 255, 255, 0.05); /* Vidro */
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent-color: #6C63FF;      /* Cor Principal (Roxo) */
            --accent-glow: rgba(108, 99, 255, 0.5);
            --text-color: #ffffff;
            --chat-me: #6C63FF;           /* Minha bolha */
            --chat-ai: #1F1F1F;           /* Bolha da IA */
            --font-main: 'Outfit', sans-serif;
            --font-title: 'Playfair Display', serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-main);
            height: 100vh;
            overflow: hidden; /* Evita rolagem na tela de bloqueio */
        }

        /* --- üîí TELA DE BLOQUEIO (Glassmorphism) --- */
        #lock-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1a1a1a, #000);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 30px;
            border: 1px solid var(--glass-border);
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            max-width: 90%;
            width: 400px;
        }

        .lock-icon { font-size: 50px; margin-bottom: 20px; animation: float 3s ease-in-out infinite; }
        
        input.password-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            padding: 15px;
            border-radius: 12px;
            color: white;
            font-family: var(--font-main);
            text-align: center;
            font-size: 18px;
            letter-spacing: 5px;
            width: 100%;
            margin-top: 20px;
            outline: none;
            transition: 0.3s;
        }

        input.password-input:focus { border-color: var(--accent-color); box-shadow: 0 0 15px var(--accent-glow); }

        button.btn-enter {
            margin-top: 20px;
            padding: 12px 30px;
            background: var(--accent-color);
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }

        button.btn-enter:active { transform: scale(0.95); }

        /* --- üè† DASHBOARD (O Sistema) --- */
        #dashboard {
            display: none; /* Come√ßa escondido */
            height: 100vh;
            padding: 20px;
            overflow-y: auto;
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 1s ease;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 20px;
        }

        h1.logo { font-family: var(--font-title); font-style: italic; font-size: 28px; }

        /* Grid de M√≥dulos */
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .module-card {
            background: #111;
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 20px;
            height: 500px; /* Altura fixa para scroll interno */
            display: flex;
            flex-direction: column;
        }

        /* --- üìú ESTILO DO CONTRATO --- */
        .contract-content {
            overflow-y: auto;
            padding-right: 10px;
            font-size: 15px;
            line-height: 1.6;
            color: #ccc;
        }
        .contract-content h3 { color: var(--accent-color); margin-top: 20px; font-family: var(--font-title); }
        .contract-content strong { color: white; }

        /* --- üí¨ ESTILO DO CHAT (Custom UI) --- */
        .chat-ui {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .msg {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            line-height: 1.4;
        }

        .msg.user {
            align-self: flex-end;
            background: var(--chat-me);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .msg.ai {
            align-self: flex-start;
            background: var(--chat-ai);
            color: #ddd;
            border-bottom-left-radius: 4px;
            border: 1px solid #333;
        }

        .chat-input-area {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            background: #1a1a1a;
            padding: 5px;
            border-radius: 50px;
            border: 1px solid #333;
        }

        .chat-input-area input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 10px 15px;
            outline: none;
        }

        .btn-send-chat {
            background: var(--accent-color);
            border: none;
            width: 40px; height: 40px;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }

        /* Scrollbar Personalizada */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

        /* Anima√ß√µes */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        .shake { animation: shake 0.4s ease-in-out; border-color: red !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }

    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="glass-card">
            <div class="lock-icon">üîí</div>
            <h2 style="font-family: var(--font-title); font-weight: normal;">Acesso Restrito</h2>
            <p style="color: #888; font-size: 14px; margin-top: 5px;">Identifique-se para entrar no Imp√©rio.</p>
            
            <input type="password" id="password" class="password-input" placeholder="SENHA" onkeypress="checkEnter(event)">
            <button class="btn-enter" onclick="unlockSystem()">ACESSAR</button>
            <p id="error-msg" style="color: #ff4d4d; font-size: 12px; margin-top: 15px; min-height: 20px;"></p>
        </div>
    </div>

    <div id="dashboard">
        <header>
            <div>
                <h1 class="logo">Imp√©rio & Fam√≠lia</h1>
                <p style="font-size: 12px; color: #666;">Sistema de Gest√£o de Relacionamento v1.0</p>
            </div>
            <div style="text-align: right;">
                <span style="display: block; font-size: 12px; color: #888;">STATUS</span>
                <span style="color: #00ff88; font-size: 14px;">‚óè Online</span>
            </div>
        </header>

        <div class="modules-grid">
            
            <div class="module-card">
                <h3 style="margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px;">üìú Cl√°usulas P√©treas</h3>
                <div class="contract-content">
                    <p><strong>Cl√°usula 01 - Fundamento:</strong> Deus √© o centro e a base de todas as decis√µes deste relacionamento.</p>
                    <br>
                    <p><strong>Cl√°usula 02 - Pacifica√ß√£o:</strong> √â estritamente proibido dormir brigado. Toda desaven√ßa deve ser resolvida ou mitigada antes do descanso.</p>
                    <br>
                    <p><strong>Cl√°usula 03 - Decoro e Imagem:</strong> Visando a preserva√ß√£o da intimidade, fica vedado o uso de roupas excessivamente curtas ou decotadas que exponham a privacidade do casal.</p>
                    <br>
                    <p><strong>Cl√°usula 04 - Transpar√™ncia:</strong> N√£o haver√° segredos. Senhas e acessos s√£o compartilhados para garantir confian√ßa total.</p>
                    <br>
                    <p><strong>Cl√°usula 05 - Lealdade P√∫blica:</strong> Em p√∫blico, somos uma frente √∫nica. Discord√¢ncias s√£o resolvidas apenas no privado.</p>
                    
                    <div style="margin-top: 30px; text-align: center; border: 1px dashed #444; padding: 10px; border-radius: 10px;">
                        <p style="font-size: 12px; color: #666;">ASSINATURA DIGITAL</p>
                        <h4 style="font-family: var(--font-title); color: var(--accent-color); font-size: 20px;">Autorizado</h4>
                    </div>
                </div>
            </div>

            <div class="module-card">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px;">
                    <h3>ü§ñ Consigliere IA</h3>
                    <span style="font-size: 10px; background: #333; padding: 2px 8px; border-radius: 10px;">Gemini Pro</span>
                </div>
                
                <div class="chat-ui">
                    <div class="chat-messages" id="chat-output">
                        <div class="msg ai">Ol√°. Sou a Intelig√™ncia Artificial do casal. Conhe√ßo todas as regras do contrato. Como posso ajudar?</div>
                    </div>
                    
                    <div class="chat-input-area">
                        <input type="text" id="user-input" placeholder="Digite aqui..." onkeypress="checkEnterChat(event)">
                        <button class="btn-send-chat" onclick="sendMessage()">‚û§</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

        // --- ‚ö†Ô∏è CONFIGURA√á√ÉO (EDITE AQUI) ‚ö†Ô∏è ---
        const PASSWORD_SYSTEM = "2024"; // Sua senha
        const GEMINI_API_KEY = "COLE_SUA_CHAVE_AQUI"; // Pegue no Google AI Studio
        // ---------------------------------------

        // 1. SISTEMA DE BLOQUEIO
        window.unlockSystem = function() {
            const input = document.getElementById('password');
            const lockScreen = document.getElementById('lock-screen');
            const dashboard = document.getElementById('dashboard');
            const errorMsg = document.getElementById('error-msg');

            if(input.value === PASSWORD_SYSTEM) {
                // Sucesso: Anima√ß√£o de sa√≠da
                lockScreen.style.opacity = "0";
                lockScreen.style.transform = "scale(1.1)";
                setTimeout(() => {
                    lockScreen.style.display = "none";
                    dashboard.style.display = "block";
                }, 800);
            } else {
                // Erro
                input.classList.add('shake');
                errorMsg.innerText = "Senha Incorreta. Tente novamente.";
                setTimeout(() => input.classList.remove('shake'), 400);
            }
        }

        window.checkEnter = function(e) { if(e.key === "Enter") unlockSystem(); }

        // 2. SISTEMA DE CHAT (GEMINI)
        const chatOutput = document.getElementById('chat-output');
        let genAI, model;

        // Tenta inicializar a IA
        try {
            genAI = new GoogleGenerativeAI(GEMINI_API_KEY);
            model = genAI.getGenerativeModel({ model: "gemini-pro"});
        } catch(e) {
            console.log("Aguardando API Key...");
        }

        window.sendMessage = async function() {
            const input = document.getElementById('user-input');
            const text = input.value;
            if(!text) return;

            // Adiciona mensagem do usu√°rio
            appendMessage(text, 'user');
            input.value = '';

            // Adiciona "Digitando..."
            const loadingId = appendMessage("Consultando as leis...", 'ai', true);

            try {
                if(GEMINI_API_KEY === "COLE_SUA_CHAVE_AQUI") {
                    throw new Error("Chave de API n√£o configurada.");
                }

                // Instru√ß√£o da Personalidade
                const prompt = `
                    Voc√™ √© um 'Consigliere' (Conselheiro) virtual de um casal crist√£o.
                    O casal tem um contrato r√≠gido: Deus no centro, proibido dormir brigado, proibido roupas curtas/decotadas, transpar√™ncia total.
                    Responda de forma curta, elegante, talvez um pouco formal (estilo m√°fia/advogado), mas acolhedora.
                    O usu√°rio disse: "${text}"
                `;

                const result = await model.generateContent(prompt);
                const response = await result.response;
                
                // Remove o loading e mostra a resposta
                document.getElementById(loadingId).remove();
                appendMessage(response.text(), 'ai');

            } catch (error) {
                document.getElementById(loadingId).remove();
                appendMessage("Erro: Configure sua API Key do Gemini no c√≥digo.", 'ai');
            }
        }

        window.checkEnterChat = function(e) { if(e.key === "Enter") sendMessage(); }

        function appendMessage(text, sender, isLoading = false) {
            const div = document.createElement('div');
            div.className = `msg ${sender}`;
            div.innerText = text;
            if(isLoading) {
                div.id = "loading-" + Date.now();
                div.style.opacity = "0.7";
                div.style.fontStyle = "italic";
            }
            chatOutput.appendChild(div);
            chatOutput.scrollTop = chatOutput.scrollHeight;
            return div.id;
        }
    </script>
</body>
</html>
